; GPIO0     : /IORQ
; GPIO1     : /RD
; GPIO2     : /WR
; GPIO3–10  : A0–A7
; GPIO11–18 : D0–D7

.program z80_io_sampling
; input GPIO0–18

start:
    wait 0 pin 0        ; /IORQ Low

    in pins, 19         ; read GPIO0–18
    push block

    wait 1 pin 0        ; /IORQ High
    jmp start
