.program z80_in_data

loop:
    ; OSR <-- TX-FIFO (data)
    pull block

    nop  [2]

    ; D0-D7 OUTPUT
    mov pindirs, ~null
    out pins, 8

    ; /RDがhighになるまで待つ
    wait 1 pin 1
    ; D0-D7 INPUT
    mov pindirs, null
    jmp loop
